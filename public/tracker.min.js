/*
 * Atlas.io Tracking Script v 0.9
 * Based on quirksmode (quirksmode.com) browser detection, owa
 * (openwebanalytics.com) tracking scripts and swfobject flash and
 * quicktime detection based on (swfobject)
 */(function(a){function n(a,b){var c=l,d=[];b=b||c.length;if(a)for(var e=0;e<a;e++)d[e]=c[0|Math.random()*b];else{var f;d[8]=d[13]=d[18]=d[23]="-",d[14]="4";for(var e=0;e<36;e++)d[e]||(f=0|Math.random()*16,d[e]=c[e==19?f&3|8:f])}return d.join("")}function o(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return""}function p(a,b,c){var d=a+"="+b;if(c){var e=new Date(Date.now()+c);d+="; expires="+e.toGMTString()}document.cookie=d+"; path=/"}function q(a,c){var g=[],h,l;if(!(l=f))return;for(var h in a)g.push(h+"="+escape(a[h]));g.length&&(l+="&"+g.join("&")),l+="&_sid="+d+"&_vt="+e;if(c||b.indexOf("MSIE")!=-1){var m=new Image;m.src=l}else if(b.indexOf("WebKit")!=-1&&"XMLHttpRequest"in window){var n;n=new XMLHttpRequest,n.open("GET",l,!1),n.send(null)}else{var o=document.createElement("script");o.setAttribute("src",l),document.getElementsByTagName("head")[0].appendChild(o)}p(j,d,i),p(k,e=Date.now(),i)}function r(){c||(c=!0,q({_d:1}));if(typeof _onbeforeunload!="undefined"){try{_onbeforeunload()}catch(a){}_onbeforeunload=null}if(typeof _onunload!="undefined"){try{_onunload()}catch(a){}_onunload=null}}var b=navigator.userAgent,c=!1,d,e,f,g={},h="127.0.0.1:8080",i=31536e7,j="__aioid",k="__aiov",l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"abcdefghijklmnopqrstuvwxyz".split("");g.e=1,g.t=document.title||"Untitled",g.vw=window.screen.width,g.vh=window.screen.height,g.tz=(new Date).getTimezoneOffset()/60;if(typeof parent!="undefined"&&parent.document.referrer!=void 0)try{g.r=parent.document.referrer+""}catch(m){}if(g.r=="")try{g.r=document.referrer+""}catch(m){}g.r=="blockedReferrer"&&(g.r=""),a.init=function(a){var b=document.location.protocol=="https:"&&"https"||"http";if(!a||/^AIO-([a-zA-Z0-9]{8,8})$/.test(a)==0)return;(d=o(j))?(e=parseInt(o(k)||0),console.log("existing session %s %s",d,e)):(d=n(),e=0,console.log("new session %s %s",d,e)),f=b+"://"+h+"/s/?_id="+a,typeof window.onbeforeunload=="function"&&(_onbeforeunload=window.onbeforeunload),typeof window.onunload=="function"&&(_onunload=window.onunload),window.onunload=window.onbeforeunload=r},a.trackPageview=function(){q(g,!0)},a.trackEvent=function(a){q({_a:a})}})(window.atlasio={});